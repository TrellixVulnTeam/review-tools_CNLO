review-tools (0.48+20210906-1) RELEASED; urgency=medium

  [ Haw Loeung ]
  * email.py: enable support for SMTP authentication via SSL

  [ Alex Murray ]
  * tests/test-updates-available.sh.expected: update to handle cope with
    new default From: email address for snap store emails
  * data/snapd-base-declaration.yaml: update snapd-base-declaration for
    new ion-memory-control, microstack-support, sd-control and
    snap-refresh-control interfaces

 -- Alex Murray <alex.murray@canonical.com>  Mon, 06 Sep 2021 13:41:38 +0930

review-tools (0.48+20210812-1) RELEASED; urgency=medium

  [ Alex Murray ]
  * overrides.py: add degw001-kernel and joule-expansion to
    update_publisher_overrides
  * snapcraft.yaml: include git tag name

  [ Emilia Torino ]
  * available.py: support reading non-LTS releases from usn db during
    scan_rock and scan_store
  * usn.py: support reading non-LTS releases during read_usn_db
  * sr_declaration.py: add plug-names to allowed constraint keys for slots

 -- Emilia Torino <emilia.torino@canonical.com>  Thu, 12 Aug 2021 12:35:42 -0300

review-tools (0.48+20210623-3) RELEASED; urgency=medium

  [ Paulo Flabiano Smorigo ]
  * overrides.py: remove snap_docker and add snap_microk8s to shared
    system-usernames instead.
  * sr_common.py: remove snap_docker and add snap_microk8s to shared
    system-usernames instead.

  [ Alex Murray ]
  * overrides.py:
    - Add intel-kernel to kernel snap overrides.
    - Update for staff historical movements.
    - Update publisher overrides for various snaps.

 -- Paulo Flabiano Smorigo <pfsmorigo@canonical.com>  Thu, 08 Jul 2021 19:34:04 +0000

review-tools (0.48+20210623-2) RELEASED; urgency=medium

  * test_sr_declaration.py: update desktop-launch tests since this is now
    super-privileged

 -- Alex Murray <alex.murray@canonical.com>  Wed, 23 Jun 2021 16:00:57 +0930

review-tools (0.48+20210623-1) RELEASED; urgency=medium

  * data/snapd-base-declaration.yaml: update snapd-base-declaration for new
    desktop-launch, dm-crypt, netlink-driver and raw-input interfaces
  * sr_common.py: update for netlink-driver slot/plug properties
  * test_sr_lint.py: add some tests for netlink-driver interface

 -- Alex Murray <alex.murray@canonical.com>  Wed, 23 Jun 2021 11:01:28 +0930

review-tools (0.48+20210622-1) RELEASED; urgency=medium

  [ Emilia Torino ]
  * sr_common.py: add support for gate-auto-refresh hook

  [ Alex Murray ]
  * overrides.py: add ubuntu-desktop-installer to
    update_publisher_overrides.
  * switch to numeric user group ids. Use unsquashfs -lln instead of
    unsquashfs -lls

 -- Emilia Torino <emilia.torino@canonical.com>  Tue, 22 Jun 2021 11:19:29 -0300

review-tools (0.48+20210531-1) RELEASED; urgency=medium

  [ Emilia Torino ]
  * available.py: considering binary names could contain arch specifier
    when parsing dpkg.list
  * store.py: consider faked-by-review-tools-dpkg part when checking if
    manifest_has_primed_staged_section

  [ Alex Murray ]
  * sr_common.py: update for dsp slot flavor property
  * overrides.py: add xlnx-config to overrides for classic snaps with
    slots

 -- Emilia Torino <emilia.torino@canonical.com>  Mon, 31 May 2021 10:00:33 -0300

review-tools (0.48+20210430-1) RELEASED; urgency=medium

  * sr_common.py: add known iface attributes to interfaces_attribs
  * data/snapd-base-declaration.yaml: update snapd-base-declaration to add
    new dsp iface

 -- Emilia Torino <emilia.torino@canonical.com>  Fri, 30 Apr 2021 12:41:23 -0300

review-tools (0.48+20210428-1) RELEASED; urgency=medium

  [ Emilia Torino ]
  * overrides.py: add new kernel and gadget snaps

  [ Steve Beattie ]
  * common.py: add impish to OS_RELEASE_MAP

 -- Emilia Torino <emilia.torino@canonical.com>  Wed, 28 Apr 2021 12:55:55 -0300

review-tools (0.48+20210414-1) RELEASED; urgency=medium

  [ Emilia Torino ]
  * reviewtools/common.py: remove use of f-strings
  * reviewtools/sr_common.py: add install-device to valid_hook_types

  [ Alex Murray ]
  * reviewtools/sr_common.py: add checks for install-mode
  * reviewtools/sr_lint.py: add checks for install-mode

 -- Emilia Torino <emilia.torino@canonical.com>  Wed, 14 Apr 2021 10:48:46 -0300

review-tools (0.48+20210413-1) RELEASED; urgency=medium

  [ Alex Murray ]
  * data/snapd-base-declaration.yaml: update snapd-base-declaration to add
    new pwm interface

  [ Emilia Torino ]
  * overrides.py: add skype to common_external_symlink_override

 -- Emilia Torino <emilia.torino@canonical.com>  Tue, 13 Apr 2021 12:11:40 -0300

review-tools (0.48+20210408-1) RELEASED; urgency=medium

  [ Emilia Torino ]
  * overrides.py: add/update for public snaps

  [ Alex Murray ]
  * run_helper: fix pylint on groovy

  [ Adam Collard ]
  * reviewtools/sr_common.py: add install-mode to known optional fields
    for daemons

  [ Emilia Torino ]
  * bin/rock-check-notices: add rock-check-notices command
  * bin/rock-updates-available: add rock-updates-available command
  * bin/snap-check-notices: refactor to move to common.py shared
    functionality with rock-check-notices
  * reviewtools/available.py:
    - add support to build rock USN emails
    - extend scan_store to scan a rock store dump as well
    - add scan_rock
  * reviewtools/overrides.py: add supported rocks to rocks@canonical.com
  * reviewtools/rr_common.py: add RockReview
  * reviewtools/store.py:
    - extend get_pkg_revisions to support rocks
    - extend get_ubuntu_release_from_manifest to support rocks manifest
    - add get_staged_packages_from_rock_manifest
  * run-helper: add bin/rock-updates-available and bin/rock-check-notices
  * setup.py: add bin/rock-updates-available and bin/rock-check-notices
  * snapcraft.yaml: add rock-updates-available and rock-check-notices apps

 -- Emilia Torino <emilia.torino@canonical.com>  Thu, 08 Apr 2021 18:23:20 -0300

review-tools (0.48+20210326-1) RELEASED; urgency=medium

  * reviewtools/sr_common.py: add fde-setup to valid_hook_types

 -- Emilia Torino <emilia.torino@canonical.com>  Fri, 26 Mar 2021 12:27:15 -0300

review-tools (0.48+20210324-1) RELEASED; urgency=medium

  * overrides.py: Add add openstackclients to update_publisher_overrides

 -- Alex Murray <alex.murray@canonical.com>  Wed, 24 Mar 2021 09:29:42 +1030

review-tools (0.48+20210323-1) RELEASED; urgency=medium

  * overrides.py: add krellian_kiosk to sec_browser_support_overrides
  * data/snapd-base-declaration.yaml: update reviewtools snapd
    base declaration for snapd 2.49.1

 -- Emilia Torino <emilia.torino@canonical.com>  Tue, 23 Mar 2021 17:17:58 -0300

review-tools (0.48+20210215-1) RELEASED; urgency=medium

  [ Ian Johnson ]
  * overrides.py: allow eks snap to use plugs

  [ Emilia Torino ]
  * overrides.py:
    - add/update for public snaps
    - remove Jamie from overrides
    - add allowed interface reference to old snap
    - adjust sec_mode_override for skype
  * available.py: remove Jamie from notifications

 -- Emilia Torino <emilia.torino@canonical.com>  Mon, 15 Feb 2021 10:24:48 -0300

review-tools (0.48+20210108-1) RELEASED; urgency=medium

  * store.py: make sure snapcraft version in snap manifest is a valid
    Debian version.

 -- Emilia Torino <emilia.torino@canonical.com>  Fri, 08 Jan 2021 14:54:49 -0300

review-tools (0.48+20201216-1) RELEASED; urgency=medium

  * available.py: properly consult seen db and set email content when creating
    USN notifications including USNs for build packages. (LP: #1906827,
    LP: #1906831)

 -- Emilia Torino <emilia.torino@canonical.com>  Wed, 16 Dec 2020 11:08:11 -0300

review-tools (0.48+20201203-1) RELEASED; urgency=medium

  * available.py: initial support for build-packages USN notifications
  * overrides.py: add override for build-packages. Add override for
    secnotversion.
  * store.py: add support for fake build-packages

 -- Emilia Torino <emilia.torino@canonical.com>  Thu, 03 Dec 2020 18:25:10 -0300

review-tools (0.48+20201117-1) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * sr_common.py: add 'flavor' attribute for greengrass-support
  * reviewtools/data/snapd-base-declaration.yaml: update reviewtools snapd
    base declaration for snapd 2.47.1 and the ptp interface from 2.48

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 17 Nov 2020 10:47:40 -0600

review-tools (0.48+20201106-1) RELEASED; urgency=medium

  * sr_common.py: add snap_docker to valid_system_usernames
  * overrides.py: add lint_system_usernames_override to list snaps
    allowed to use given snapd_<username>
  * sr_lint.py: limit use of usernames based on
    lint_system_usernames_override when applicable (LP: #1896788)

 -- Emilia Torino <emilia.torino@canonical.com>  Fri, 06 Nov 2020 18:48:45 -0300

review-tools (0.48+20201105-1) RELEASED; urgency=medium

  [ Emilia Torino ]
  * reviewtools/sr_security.py: allow snaps to use lzo

  [ Alex Murray]
  * reviewtools/common.py: add hirsute to OS_RELEASE_MAP
  * reviewtools/usn.py: add focal to tracked_releases

 -- Emilia Torino <emilia.torino@canonical.com>  Thu, 05 Nov 2020 19:30:51 -0300

review-tools (0.48+20201013-1) RELEASED; urgency=medium

  * overrides.py: add/update for public snaps

 -- Emilia Torino <emilia.torino@canonical.com>  Tue, 20 Oct 2020 09:39:39 -0300

review-tools (0.48+20201013-1) RELEASED; urgency=medium

  * overrides.py: add core22 base snap to update_publisher_overrides

 -- Emilia Torino <emilia.torino@canonical.com>  Tue, 13 Oct 2020 16:41:21 -0300

review-tools (0.48+20201007-1) RELEASED; urgency=medium

  [ Ian Johnson ]
  * overrides.py: libreoffice can use lzo

  [ Emilia Torino ]
  * only consider ABI when converting kernel version formats for kernel USN
    notifications
  * overrides.py: add support for core22 base snap

 -- Emilia Torino <emilia.torino@canonical.com>  Wed, 07 Oct 2020 18:54:28 -0300

review-tools (0.48+20201006-1) RELEASED; urgency=medium

  * overrides.py: add/update for public snaps

 -- Emilia Torino <emilia.torino@canonical.com>  Tue, 06 Oct 2020 09:17:34 -0300

review-tools (0.48+20200921ubuntu1) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * reviewtools/overrides.py: allow firefox to use lzo as well

 -- Emilia Torino <emilia.torino@canonical.com>  Thu, 24 Sep 2020 13:33:32 -0300

review-tools (0.48+20200921) RELEASED; urgency=medium

  * reviewtools/overrides.py:
    - Add vault and edgex snaps to update_publisher_overrides
    - Add new canonical_edgex email group

 -- Emilia Torino <emilia.torino@canonical.com>  Mon, 21 Sep 2020 09:22:25 -0300

review-tools (0.48+20200904-1) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * reviewtools/data/snapd-base-declaration.yaml: update reviewtools snapd
    base declaration for snapd 2.46
  * Makefile: update check-deps to require black as a snap

  [ Emilia Torino ]
  * reviewtools/sr_common.py: add support for check-health hook

 -- Emilia Torino <emilia.torino@canonical.com>  Fri, 04 Sep 2020 10:22:41 -0300

review-tools (0.48+20200807-1) RELEASED; urgency=medium

  [ Ian Johnson ]
  * tests/manual-lzo-part2.sh: verify lzo snaps on foreign arches

  [ Emilia Torino ]
  * reviewtools/store.py:
    - prefer primed-stage-packages new manifest section if present
      when retrieving snap staged packages
    - append faked packages from the update_stage_packages override to
      primed-stage-packages manifest section if present

  [ Jamie Strandboge ]
  * reviewtools/common.py: refactor tests into ReviewBase and have Review
    derive from it
  * reviewtools/sr_declaration.py:
    - refactor is_bool and str2bool into _verify_declaration()
    - fix matching for allow with multiple constraints
    - move check_{personal,system}files_iface_reference checks to
      sr_declaration.py
  * add bin/snap-verify-declaration

  [ Alex Murray]
  * reviewtools/overrides.py: Add charmcraft to sec_iface_ref_overrides

 -- Emilia Torino <emilia.torino@canonical.com>  Fri, 07 Aug 2020 16:37:22 -0300

review-tools (0.48+20200706-1) RELEASED; urgency=medium

  * tests/manual-lzo.sh updates (thanks to Ian Johnson)
  * README.cross-distro: update urls
  * snapd-base-declaration.yaml: update for newly added 2.46 interfaces

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 06 Jul 2020 11:01:46 -0500

review-tools (0.48+20200623-1) RELEASED; urgency=medium

  * overrides.py: add/update for public snaps
  * sr_common.py: add riscv64 architecture (thanks Dimitri John Ledkov,
    LP: #1884820)

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 23 Jun 2020 15:48:26 -0500

review-tools (0.48+20200622-1) RELEASED; urgency=medium

  * overrides.py: add/update for public snaps
  * sr_lint.py: sort the external symlinks, which should fix !x86 builds

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 22 Jun 2020 15:06:49 -0500

review-tools (0.48+20200608-1) RELEASED; urgency=medium

  * bin/snap-review: update help text wrt exit codes
  * sr_security:
    - add SNAP_ENFORCE_RESQUASHFS_COMP=0
    - SNAP_DEBUG_RESQUASHFS should go to stderr
    - mention using squashfs-tools >= 4.3
  * common.py:
    - adjust UNSQUASHFS_IGNORED_ERRORS for lxc failures
    - allow users with leading '_' (eg, _apt)
    - clarify find_external_symlinks() and fix sym -> sym
  * snapd-base-declaration.yaml: update for 2.45

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 08 Jun 2020 11:42:15 -0500

review-tools (0.48+20200521-2) RELEASED; urgency=medium

  * sr_common.py: add "in progress" desktop-launch interface

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 21 May 2020 16:46:27 -0500

review-tools (0.48+20200521-1) RELEASED; urgency=medium

  * overrides.py: add/update for public snaps
  * store.py: make get_ubuntu_release_from_manifest() more robust
  * common.py: also use readlink() to check for external py3

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 21 May 2020 13:38:59 -0500

review-tools (0.48+20200505-1) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * overrides.py: add/update for public snaps
  * store.py:
    - add revision to error messages
    - allow per-base update_stage_packages overrides
  * sr_common.py: support daemon-scope

  [ Alex Murray ]
  * common.py: Add groovy to OS_RELEASE_MAP
  * Makefile: Add check-deps target to check for required packages before
    running checks

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 05 May 2020 14:44:20 -0500

review-tools (0.48+20200408-1) RELEASED; urgency=medium

  * sr_common.py: preliminary support for "activates-on"
  * overrides.py: add/update for public snaps

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 08 Apr 2020 15:10:07 -0500

review-tools (0.48+20200402-1) RELEASED; urgency=medium

  * sr_functional.py: allow skipping certain paths on core for missing files

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 02 Apr 2020 15:31:56 -0500

review-tools (0.48+20200330-1) RELEASED; urgency=medium

  * sr_security.py: regulate device files in os and base snaps
  * refactor unsquashfs -lls and its parsing to common.py and sr_common.py
  * sr_functional.py:
    - use state files for base snap missing/changed metadata file checks
    - use state files for base snap abi file checks
  * overrides.py: add/update for public snap

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 30 Mar 2020 17:11:17 -0500

review-tools (0.48+20200317-1) RELEASED; urgency=medium

  * sr_lint.py: update maximum layouts to 30
  * sr_declaration.py:
    - fix logic error when comparing lists
    - enforce better written snap decls for installation
    - rearrange comments into preamble and code comments
  * overrides.py: add/update for various public snaps
  * bin/repack-snap: detect and reuse the compression algorithm
  * common.py: refactor setting LANG/LC_ALL into set_lang()/restore_lang()
  * add snap-specific lzo support
  * snapd-base-declaration.yaml: add uio
  * sr_common.py:
    - add raw-volume path attribute
    - add uio path attribute

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 17 Mar 2020 16:48:44 -0500

review-tools (0.48+20200226-1) RELEASED; urgency=medium

  * add bin/store-query and update README
  * bin/get-base-declaration:
    - add --json
    - remove sort_keys=True from yaml.dump
  * refactor README into README.cross-distro
  * sr_lint.py: move valid_compiled_architectures to sr_common.py
  * sr_common.py: allow using SnapReview(None, None) for utils
  * snap packaging updates for store-query
  * overrides.py: update for snap-store and aws-cli

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 26 Feb 2020 16:01:54 -0600

review-tools (0.48+20200224-1) RELEASED; urgency=medium

  * snap-review: support --state-input and --state-output
  * overrides.py:
    - adjust for ludo and bcc
    - adjust sec_mode_override for snapd and core
  * sr_declaration.py:
    - use defaults for missing constraints (LP: #1864103)
    - properly handle scoped snap declaration deny rules with no matching
      checks
  * sr_security.py: support lists for sec_mode_override
  * add bin/get-base-declaration

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 24 Feb 2020 12:13:40 -0600

review-tools (0.48+20200211-1) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * sr_security.py: add checks to warn if iref matches another interface
  * sr_declaration.py: add plug-names/slot-names checks
  * sr_{available,store}.py: support collaborators (LP: #1859034)
  * testsuite:
    - bring test_store.py back to 100% coverage
    - reviewtools/tests/test_*: s/assertEquals/assertEqual/
  * snap-review:
    - output the report in a second step from the checks
    - refactor --sdk code; add add_runtime_error()

  [ Alfonso Sánchez-Beato ]
  * overrides.py: update network-manager deb version

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 11 Feb 2020 12:37:15 -0600

review-tools (0.48+20200203-1) RELEASED; urgency=medium

  * overrides.py:
    - add several snaps to shared publishers
    - update for canonical_foundations
    - update for git-machete
  * reviewtools/{available,store}.py: handle empty manifest
  * use flake8 instead of pep8/pyflakes
  * add black style-check and black format our python files
  * use base: core18 with various snap packaging updates to make things work
    again with 'base: core18'
  * sr_security.py/common.py: handle squashfs-tools 4.4 unsquashfs updated
    error handling
  * sr_declaration.py: check interface attributes when 'interface' omitted
    (LP: #1860821)
  * add bin/dump-tool

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 03 Feb 2020 13:14:40 -0600

review-tools (0.48+20191211-3) RELEASED; urgency=medium

  * snapd-base-declaration.yaml: revert pulseaudio change until 2.43 is stable

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 11 Dec 2019 16:51:35 -0600

review-tools (0.48+20191211-2) RELEASED; urgency=medium

  * reviewtools/overrides.py: add certbot override

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 11 Dec 2019 13:45:57 -0600

review-tools (0.48+20191211-1) RELEASED; urgency=medium

  * reviewtools/overrides.py: add more personal-files and system-files
    overrides

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 11 Dec 2019 08:55:36 -0600

review-tools (0.48+20191210-1) RELEASED; urgency=medium

  * update 2.42 interfaces
  * add upcoming 2.43 interfaces
  * reviewtools/overrides.py:
    - update for canonical-enablement
    - add gnome-system-monitor override

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 10 Dec 2019 23:51:49 +0000

review-tools (0.48+20191125-1) RELEASED; urgency=medium

  * support RT_EXTRAS_PATH
  * run-tests: honor RT_EXTRAS_PATH
  * reviewtools/tests/utils.py: add optional add_icon
  * overrides.py updates for:
    - vht
    - universal-ctags
    - get-iplayer
  * overrides.py: add classic_interfaces_exception and
    interfaces_attribs_addons

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 04 Nov 2019 10:46:35 -0600

review-tools (0.48+20191104-1) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * overrides.py:
    - add test-snapd-pc to update_publisher_overrides
    - allow chromium to symlink to xdg-open (LP: #1850553)
  * debian/control: drop unneeded Build-Deps
  * snap-updates-available:
    - improve error message for scan_snap()
    - don't error with missing release in USN db
    - use SafeLoader() and skip revisions with invalid yamls
  * adjust run-helper/run-pylint to run with renamed pylint3 as pylint
  * test_sr_functional.py: workaround execstack LP: 1850861
  * common.py: close some files and add assign_type_to_dict_values()
  * sr_declaration.py:
    - update for slots-per-plug/plugs-per-slot
    - fix conditional logic in verify_constraint()

  [ Alex Murray ]
  * reviewtools/common.py: Add eoan and focal to OS_RELEASE_MAP

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 04 Nov 2019 10:42:12 -0600

review-tools (0.48+20191024-1) RELEASED; urgency=medium

  * README: update for release process
  * update overrides for dynocsv and ngrok

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 24 Oct 2019 12:00:08 -0500

review-tools (0.48) RELEASED; urgency=medium

  * renamed as review-tools
    - adjust debian/links to link click-review to snap-review
    - remove all click review code
    - mv clickreviews reviewtools
  * sr_common:py:
    - update the pkgversion regexp, add tests. Patch from John R. Lenton
    - update the pkgname checks, add tests. Patch from John R. Lenton
      (LP: #1751447)
    - cache self.pkg_files() and self.pkg_bin_files() for >50% improvement in
      speed for non-resquash tests. At this point, the non-resquash test times
      are dominated by magic.py and libmagic so further improvements would need
      investigating in that area
    - update magic_binary_file_descriptions for newer file/python-magic
    - support new 'snapd' snap type
    - add disconnect-* and unprepare-* hooks
  * sr_lint.py:
    - add checks for 'layout' (for now, default to 'warn' when in use at
      request of the snapd team
    - when checking app command, ignore arguments
    - 'common-id' is valid with non-daemon commands
    - add checks for refresh-mode and stop-mode
    - verify snap/manifest.yaml if it exists
    - add check for timer
    - add check for before/after
    - update epoch checks for new yaml (LP: #1780981)
    - add minimum length check for snap name (LP: #1763048)
    - add unicode-text-validation for toplevel snap.yaml fields (LP: #1750527)
    - bases are allowed with 'type: gadget'
    - add checks for personal-files/system-files
    - add checks for command-chain
    - add checks for restart-delay, start-timeout and watchdog-timeout
    - add environment check for hooks
    - add slots check for hooks
    - add command-chain checks for hooks
    - specially handle snaps for symlinks which use 'base: nix-base'
    - expand desktop file checks
    - support icon sets (and fix regression LP: #1844534)
  * sr_security.py:
    - fix evaluation of SNAP_ENFORCE_RESQUASHFS so '0' turns it off
    - turn on resquash tests by default
    - improve resquashs error message to use snapcraft >= 2.38 (LP: #1763641)
    - quick check unsquash -s to detect if fragments are used
  * rename gnome-online-accounts-service to accounts-service
  * add snap-updates-available
  * add 2.34 interfaces
  * add 2.35 interfaces
  * add 2.36 interfaces
  * add 2.37 interfaces
  * add 2.38 interfaces
  * add 2.39 interfaces
  * add 2.40 interfaces
  * add 2.41 interfaces
  * sr_declaration.py:
    - support verifying on-store and on-brand constraints
    - add plugs and slots checks for apps and slots
  * common.py:
    - add 'top=True' to recursive_rm and chmod the dirPath when set
      (LP: #1786071)
    - ensure the original directory is moveable in _unpack_cmd() (LP: #1801788)
    - support valid previxes in find_external_symlinks()
  * add snap-check-notices
  * sr_functional.py: add base snap mountpoint checks
  * add diffsquash tool

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 18 Oct 2019 12:05:11 -0500

click-reviewers-tools (0.47) RELEASED; urgency=medium

  [ Jamie Strandboge ]
  * cr_lint.py: skip version check in check_control() if apt_pkg import fails.
  * add overrides.py and refact sr_* to move overrides into this file
  * sr_lint.py:
    - add check for new store limit on pkgname length
    - add check for required interface attributes
    - update desktop file error output for clarity
    - add completer checks
    - update for base snaps
    - update text for classic confinement
    - add checks for reload-command
    - add preliminary checks for license
    - show deprecation messages for using aliases in snap.yaml at 'info' level.
      In the future, we'll change this to 'warn'
    - remove non-existent 'socket', 'listen-stream', 'socket-user' and
      'socket-group' for v2 snaps
    - add tests for new socket activation yaml
    - add check for redflagged base snaps
    - add check for unreadable/inaccessible squashfs-root and
      squashfs-root/meta
    - add executable and known checks for all hooks
    - add checks for updated content interface slot attributes
  * sr_declarationl.py: improve the browser-support error message
  * sr_common.py:
    - don't traceback if toplevel plugs/slots is not dict
    - add 'completer' (LP: #1689578)
    - look for data in $SNAP/data
    - add 'license'
    - mksquashfs should use -no-fragments
    - add 'refresh-schedule'
    - add 'common-id'
  * data/snapd-base-declaration.yaml: update for latest snapd releases
  * sr_security.py:
    - update for base snaps
    - use fakeroot (behind env var) for resquashfs tests and refactor
    - put resquashfs enforcement behind env var
    - add check for unreadable/inaccessible squashfs-root and
      squashfs-root/meta
  * cr_security.py: look for data in $SNAP/data
  * frameworks.py: look for data in $SNAP/data
  * add sr_functional.py for execstack checks
  * common.py:
    - calculate uncompressed squashfs size and error if too big
    - calculate compressed squashfs size and error if too big
    - use $SNAP_USER_COMMON for tmpdir if it is set
    - clean out stale review directories
    - adjust recursive_rm() to chmod the directory if receive PermissionError
    - adjust to output json for errors
    - use SNAP_DEBUG in debug()
  * bin/create-snap-declaration:
    - output review text
    - handle dbus name assignment
  * testsuite changes:
    - add functional teststuite
    - refactor various scripts into run-helper and only checkc snap v2 files by
      default (use CHECK_CLICK_FILES=1 for snap v1 and click)
    - create setup.cfg based on pep8 vs pycodestyle
    - add pylint3 checks (for now just pylint3 -E)
    - add run-snap-build-tests
    - use python3 with json tool
  * remove unused bin/detect-package and refactor detect_package
  * debian/control:
    - add fakeroot to Build-Depends and Depends
    - sync Build-Depends and Depends
    - add jq to Build-Depends

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 07 Feb 2018 15:02:22 -0600

click-reviewers-tools (0.46) zesty; urgency=medium

  [ Jamie Strandboge ]
  * add snapd interfaces for up to and including snapd 2.24
  * sr_lint.py:
    - don't flag reference, Canonical and accepted vendor kernel and gadgets
    - adjust error text for check_meta_gui_desktop()
    - don't warn when using 'grade' with 'type: os'
    - only check for presence of Exec= in desktop file since there is no
      guarantee that the binary will match a command name
    - add check_hooks() (LP: #1586465)
    - add check_hooks_plugs()
    - add check_assumes() (LP: #1586429)
    - don't flag 'core' os snap for manual review
    - linux-generic-bbb is allowed as a kernel
    - remove interface checks that are now handled by sr_declaration.py
    - powerpc is a valid arch
    - remove check_license_agreement() and check_license_version() since they
      are no longer support (LP: 1605068)
    - support confinement: classic
    - add check_apps_aliases()
    - handle ms, ns and us granularities, integers larger than 60 and fix a
      traceback in stop-timeout error reporting (LP: #1654451)
    - remove unsupported 'daemon: dbus' and add 'daemon: notify'
    - don't allow specifying interfaces with 'confinement: classic'
      (LP: 1655369)
    - add a mechanism to override certain snaps that use a desktop interface
      but don't require a desktop file (LP: #1670162)
    - allow ints and floats as values for env variables
  * sr_security.py:
    - whitelist a few files for Canonical demo snaps
    - add 'core' snap to sec_mode_overrides
    - remove interface checks that are now handled by sr_declaration.py
    - remove policy_vendor and policy_version checks since they don't apply
      to declaration checks
    - allow sticky dirs in the squashfs since some stage-packages ship them
    - allow overriding snaps that can use browser-support with daemon
  * common.py:
    - remove 'application/octet-stream; charset=binary' from
      magic_binary_file_descriptions to reduce false positives in
      _list_all_compiled_binaries() (LP: #1591253)
    - don't traceback in recursive_rm if encounter a directory we cannot read
    - allow snaps to symlink to SNAP and SNAP_DATA in find_external_symlinks()
    - 'icon' is an allowed optional field
    - 'aliases' is allowed as an optional apps field
  * sr_common.py:
    - add 'content' and 'default-provider' as valid attributes
      for the content interface
    - add 'privileged-containers' as valid attribute for docker-support
    - don't read in old apparmor policy or use aa_policy dict and use only
      the base declaration
    - add 'dbus' attributes
    - add in progress unity8 interface
    - adjust _verify_pkgname() for snapd commit 88665e9a
  * add sr_declaration.py:
    - check snap.yaml against base and snap declarations
  * add bin/create-snap-declaration.py
  * cr_common.py: refactor anything that uses aa_policy from common.py
  * bin/click-review:
    - support --plugs and --slots and apply them as snap declaration overrides
    - support --allow-classic and apply it as 'confinement: classic' override
  * setup.cfg: fix deprecation warnings with pep8

  [ Celso Providelo ]
  * sr_lint.py: support 'grade' field in snap-v2 (LP: #1618123)

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 28 Mar 2017 20:46:43 +0000

click-reviewers-tools (0.45) yakkety; urgency=medium

  * data/apparmor-easyprof-ubuntu.json:
    - move all snappy interfaces into 'common' since snapd requires manually
      connecting privileged interfaces
    - refresh for newest interfaces
  * sr_lint.py:
    - don't flag ubuntu-core OS snap for manual review
    - don't flag certain snap names for manual review for particular
      interfaces
    - mark 'confinement' with incorrect snap types as 'info' to workaround
      snapcraft always adding it (safe because snapd ignores it)
    - don't flag pc-kernel, pi2-kernel and dragonboard-kernel for manual
      review
    - 'type: gadget' is valid with 'confinement'
    - add meta/gui/*.desktop checks for Exec=
    - warn if plugging desktop interfaces without specifying and desktop files
    - don't error if find binaries in gadget snaps in check_architecture_all()
  * sr_common.py:
    - content interface 'read' and 'write' are lists, not strings
  * sr_security.py:
    - specifying slots with gadgets should not trigger manual review
    - don't allow 'browser-support' with 'daemon'
    - add file checks from unsquashfs -lls output
  * bin/click-review: show traceback if for runtime errors

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 29 Aug 2016 12:22:17 -0500

click-reviewers-tools (0.44) yakkety; urgency=medium

  [ Jamie Strandboge ]
  * data/apparmor-easyprof-ubuntu.json:
    - add pulseaudio interface
    - add bluetooth policy group for Touch for 15.04 and higher
    - add location-observe and location-control
    - move all core interfaces to 'common'
    - add gsettings interface
    - set home to auto-approve
    - add mpris interface
    - add camera interface
    - add optical-drive interface
    - add serial-port interface
    - add content interface
  * clickreviews/common.py:
    - don't fail on libmvec.so since it comes from libc6 too (LP: #1584346)
    - extend the regex to also match ld-linux-x86-64.so.2
  * sr_common.py:
    - update _verify_pkgname() and _verify_appname() to use the same regex as
      in snapd and various tests
    - update attributes to be slots or plugs side and cleanup code for
      specifying attributes
  * bin/click-review, clickreviews/modules.py: exit '1' if error with
    init_object or running checks
  * sr_lint.py:
    - support 'environment' key in yaml (LP: #1583259)
    - support 'confinement' key in yaml
  * sr_security.py:
    - specifying mpris slot should not warn
    - adjust profile name length checks to use series 16 security label format
  * run_tests: exit non-zero with failures, errors or unexpectedSuccesses
  * cr_lint.py:
    - 'puritine' is a known, but redflagged hook
    - skip external symlinks and md5sums checks for puritine (since we expect
      external symlinks and the hash checks fail on broken symlinks)
    - 'puritine' hook should not be used with 'apparmor'
  * clickreviews/apparmor_policy.py: adjust for rename of store team
    (LP: #1608943)

  [ Celso Providelo ]
  * support for interface abbreviated syntax (LP: #1595184)

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 02 Aug 2016 08:23:46 -0500

click-reviewers-tools (0.43) yakkety; urgency=medium

  [ Jamie Strandboge ]
  * sr_lint.py:
    - kernel snaps may have external symlinks
    - handle top-level plugs and slots with yaml data as 'null' (LP: #1579201)
    - add epoch checks (LP: #1583298)
    - .pyc are arch-independent, so don't complain about them
    - add confinement checks (LP: #1580819)
  * data/apparmor-easyprof-ubuntu.json:
    - add opengl interface as 'common' (LP: #1572140)
    - add reserved bluez, network-manager and location-observe interfaces
  * sr_security.py:
    - remove last reference to 'cap'
    - turn resquash test into info for now until the squashfs-tools bugs are
      fixed and this is a reliable check
  * when 'confinement' is 'devmode', override the result type to 'info'
    - common.py: add override_result_type to allow in support of 'confinement'
      overrides
    - sr_common.py: add _devmode_override()
    - sr_security.py: use override_result_type if in devmode

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 20 May 2016 16:01:16 -0500

click-reviewers-tools (0.42) xenial; urgency=medium

  * add test to verify snapd-control is reserved
  * sr_lint.py: implement interface slots checks
  * sr_security.py: implement interface slots checks (force manual review for
    now when specifying slots)
  * debian/links: create snap-review symlink to click-review

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 21 Apr 2016 09:10:27 -0500

click-reviewers-tools (0.41) xenial; urgency=medium

  * sr_lint.py: verify key name in the apps dictionary (LP: #1570914)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 15 Apr 2016 10:24:17 -0500

click-reviewers-tools (0.40) xenial; urgency=medium

  * sr_lint.py: ppc64el and s390x are valid architectures
  * add bool-file interface tests
  * remove obsoleted old-security interface checks
  * properly handle app 'plugs' without toplevel 'plugs' (LP: #1569226)
  * implement native plugs and app plugs checks

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 13 Apr 2016 15:19:47 -0500

click-reviewers-tools (0.39) xenial; urgency=medium

  * bin/click-review:
    - exit 1 if fatal error, 2 if found errors/warnings and 3 if found
      warnings (LP: #1523255)
    - make help output more verbose (including return codes)
    - add overrides as optional positional argument
  * [cs]r_lint.py: change the order of the checks so that an obsolete or
    deprecated in the override takes precedence over 'available'
  * migrate from skills to interfaces (LP: #1549427)
  * sr_security.py:
    - improve requash failure error message
    - short-circuit if squashfs has symlinks (LP: 1555305)
    - os snap is not built with -all-root, ignore checksum mismatch
  * cr_security.py: webapps may now use camera, microphone and connectivity
  * sr_lint.py:
    - adjust for stop -> stop-command and poststop -> post-stop-command
    - make unknown field warning for apps more clear
    - normalize path specified in snap.yaml for command
  * remove type framework, frameworks and bus-name checks since frameworks
    aren't supported on 16.04 (LP: #1557126)
  * debian/control: Build-Depends on pyflakes3 instead of pyflakes

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 22 Mar 2016 10:37:09 -0500

click-reviewers-tools (0.38) xenial; urgency=medium

  * sr_security.py: add check_squashfs_resquash()

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 26 Feb 2016 08:41:28 -0600

click-reviewers-tools (0.37) xenial; urgency=medium

  [ Jamie Strandboge ]
  * cr_lint.py: 'accounts' hook was added in 15.04.1. The other checks are
    already in place since r553 which missed this addition
  * refactor and make less click-centric such that click and snap v1 tests
    use existing scripts and snap v2 will use new scripts. The cr_* tests have
    16.04 checks removed (since this simplifies them and this code won't be
    run any way)
  * add bin/detect-package and detect_package()
  * rename unpack-click as unpack-package
  * add snap v2 lint checks (LP: #1532842)
  * add snap v2 security checks
  * squashfs snaps no longer require manual review
  * debian/control: bump squashfs-tools to Depends and add to Build-Depends

  [ James Tait ]
  * cr_lint.py: Don't check for the presence of readme.md if the package is a
    squashfs filesystem. Snappy 2.0 uses squashfs as its file format, and
    doesn't require readme.md.

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 22 Feb 2016 16:41:14 -0600

click-reviewers-tools (0.36) xenial; urgency=medium

  [ Daniel Holbach ]
  * Add check if suspected (using python-magic) compiled binaries
    aren't actually just message catalogs (.mo files) (LP: #1530894).

  [ Martin Albisetti ]
  * add gadget type

  [ Michael Vogt ]
  * Merge partial support for snap.yaml in 16.04

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 01 Feb 2016 11:37:35 -0600

click-reviewers-tools (0.35.1) xenial; urgency=medium

  * No change rebuild for newer python3

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 01 Feb 2016 10:07:35 -0600

click-reviewers-tools (0.35) xenial; urgency=medium

  [ Jamie Strandboge ]
  * clickreviews/cr_systemd.py:
    - add checks for listen-stream, socket, socket-user and socket-group
    - remove vendor checks with bus-name (LP: #1510522)
  * clickreviews/cr_security.py:
    - make sure that the generated profile name is under the current 253
      character maximum. This might have to be adjusted after the AppArmor
      stacking work is completed (LP: #1499544)
    - adjust for xenial snappy defaulting to using 'network-client' instead
      of 'networking'
    - use 'NEEDS REVIEW' instead of 'MANUAL REVIEW'
  * clickreviews/cr_lint.py:
    - check if package ships .click directory
    - add a few more vcs files
    - remove vendor-specific checks. 'vendor' is still allowed for
      compatibility with older snappy versions, but no formatting checks are
      performed (LP: #1510522)
    - 'Maintainer' checks in the click manifest should only be done with click
      packages (LP: #1510522)
    - don't prompt manual review when find .excludes file
    - add kernel and os as valid snap types
    - remove package filename checks. They were meaningless and hard to
      maintain
    - sort unknown snappy yaml keys
    - use 'NEEDS REVIEW' instead of 'MANUAL REVIEW'
  * clickreviews/cr_common.py:
    - add valid yaml keys for kernel snaps
    - add a couple more mime types for detecting binaries (useful for arm
      kernels)
  * update data/apparmor-easyprof-ubuntu.json for 16.04 policy
  * Makefile: add json syntax check
  * several changes for squashfs snaps that won't have a click manifest, etc.
    Importantly, this means that only package.yaml is looked at and a lot of
    click specific tests can be skipped
    - cr_common.py:
      + rename a few variable to not be click specific
      + add self.pkgfmt
      + adjust __init__() to conditionally use package.yaml on squashfs,
        otherwise click manifest
      + make click data structure initialization conditional on if click
        or not (eg, don't run hooks code on squashfs images)
    - adjust clickreviews/cr_* to conditionally run certain click-only tests
      on click packages
    - adjust architecture checks to use self.pkg_arch and rename
      control_architecture_specified_needed as architecture_specified_needed
    - cr_security.py:
      + revamp to use package.yaml on non-click instead of now nonexistent
        security manifest
      + update push-helper template test to not make hooks specific
      + network-client should not be allowed with push helpers either
      + conditionally look for INSTALL_DIR on 16.04 systems in security-policy
      + adjust security-override checks on 16.04 to follow 16.04 yaml
      + make click manifest checks conditional on if click
    - cr_tests.py: mock _pkgfmt_type(), _pkgfmt_version() and _is_squashfs()

  [ Michael Nelson ]
  * add support for non-mocked tests

  [ Michael Vogt ]
  * add support for squashfs snaps (currently will trigger manual review)

  [ Daniel Holbach ]
  * Pass absolute path of click or snap file - that way it's safe even if we
    chdir (LP: #1514346).
  * Allow translated scope .ini fields to have 3 letters as their lang_code
    identifier, ie. 'ast'. (LP: #1517017)
  * Ensure "urls" is not empty (LP: #1522777)

  [ James Tait ]
  * Add a handful of links to askubuntu questions to explain some of the
    rejection messages.

  [ Alberto Mardegan ]
  * Allow "accounts" hook since the 15.04.1 framework
  * Online Accounts: update to latest plugin hook format (LP: #1520605)

  [ Marcus Tomlinson ]
  * Forbid the internal "DebugMode" scope.ini key from making its way into the
    store (LP: #1511063)

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 14 Dec 2015 16:09:52 -0600

click-reviewers-tools (0.34) wily; urgency=medium

  [ Jamie Strandboge ]
  * multiple 'desktop' hooks should only be 'info' these days (LP: #1496402)
  * verify snaps that use 'bus-name' are of 'type: framework'
  * clickreviews/cr_lint.py:
    - snappy package.yaml defaults to 'architectures' and 'architecture' is
      deprecated. Adjust and add a warning for deprecation.
    - arm64 is a valid architecture now
    - don't warn on libc6 libraries with check_external_symlinks
    - don't traceback on broken symlinks when checking for hardcoded paths
      (LP: #1502962)
  * clickreviews/cr_security.py: don't complain about missing AppArmor
    template vars if we detect this is unconfined boilerplate policy

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 09 Oct 2015 17:47:39 -0500

click-reviewers-tools (0.33) wily; urgency=medium

  [ Alberto Mardegan ]
  * clickreviews/cr_online_accounts.py: Do not check for "type" element in OA
    .service files
  * clickreviews/cr_online_accounts.py: Support the new "accounts" hook

  [ Jamie Strandboge ]
  * clickreviews/cr_common.py: add peer_hooks_link to __init__ and use it
    as the link for missing and disallowed hooks
  * clickreviews/cr_online_accounts.py: set peer_hooks_link to use
    https://wiki.ubuntu.com/SecurityTeam/Specifications/OnlineAccountsConfinement
  * clickreviews/tests/test_cr_online_accounts.py: don't stub or check for
    "type" element in OA .service files
  * Makefile: make sure check-names.list is up to date via 'make check'

  [ Ricardo Kirkner ]
  * Refactor to abstract check name generation.
    This will be used in a follow up branch to normalize check names in a way
    that allows extracting semantic meaning of check names from review results
    data.
  * build name from review_type, prefix, app and extra parts using : as
    separator
  * list all possible check types by running tests and extracting seen check
    names

  [ Daniel Holbach ]
  * Fix pep8 issues.

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 10 Sep 2015 11:17:00 -0500

click-reviewers-tools (0.32) wily; urgency=medium

  * data/apparmor-easyprof-ubuntu.json: add "keep-display-on" to ubuntu
    common policy
  * cr_security.py:
    - webapps may use "keep-display-on"
    - error if security-policy specified in snaps
  * cr_lint.py:
    - give link to frameworks guide if framework specified
    - do not error if apparmor-profile specified with snap (handled by above
      change)

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 09 Jul 2015 08:57:26 -0500

click-reviewers-tools (0.31) wily; urgency=medium

  * cr_security.py:
    - webview is not required with ubuntu-account-plugin
    - bin-path and systemd hooks shouldn't be used any more to ascertain if an
      app is a service or binary since snappy build is no longer adding them
      and snappy install ignores them (LP: #1472296)
  * cr_common.py: comment that snappy-systemd hook is deprecated
  * cr_lint.py: comment that snappy-systemd hook is deprecated
  * cr_systemd.py:
    - directly parse package.yaml instead of parsing deprecated snappy-systemd
      hook
    - remove snappy-systemd hook checks now that it is ignored by snappy
      install in stable releases
  * cr_bin_path.py: remove bin-path hook checks now that it is ignored by
    snappy install in stable releases

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 07 Jul 2015 15:11:15 -0500

click-reviewers-tools (0.30) wily; urgency=medium

  * cr_security.py: verify required and allowed policy groups with the
    ubuntu-account-plugin template (LP: #1468792)
  * cr_systemd.py: whitespace pep8 fixes for trusty to fix FTBFS in SDK
    staging ppa

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 26 Jun 2015 09:27:09 -0500

click-reviewers-tools (0.29) wily; urgency=medium

  * README: add notes on where to upload review tools to keep projects in sync
  * cr_online_accounts.py: account-provider and account-qml-plugin can now be
    allowed if used with apparmor (LP: #1219644)
  * cr_security.py:
    - verify when account-provider and account-qml-plugin are used that the
      security manifest uses the "ubuntu-account-plugin" template
    - correctly update the cached json if needed
  * apparmor_policy.py: fix bug that prevented get_policy_file() from working

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 25 Jun 2015 17:54:21 -0500

click-reviewers-tools (0.28) wily; urgency=medium

  [ Jamie Strandboge ]
  * Makefile: perform run-pyflakes in check target
  * cr_systemd.py: add bus-name checks and update testsuite
  * add security yaml checks
  * cr_lint.py: don't allow same key in 'binaries' and 'services'
  * cr_lint.py: implement hashes.yaml checks
  * update README
  * cr_desktop.py: add check to help transition away from obsoleted
    ubuntu-html5-app-launcher
  * cr_common.py: remove snappy 'integration' checks
  * cr_systemd.py: implement ports checks
  * cr_systemd.py, cr_bin_path.py: error out if services or binaries is empty,
    repectively
  * cr_lint.py: update pkgname checks for snaps-- shouldn't have '.' in the
    name
  * cr_lint.py: add snappy-config checks
  * cr_lint.py: maintainer isn't needed in compat click manifest for snaps
    that don't specify vendor
  * debian/control: Depends on binutils (for 'ar')

  [ Marcus Tomlinson ]
  * cr_scope.py: add "keywords" to the list of optional scope .ini keys

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 10 Jun 2015 16:07:33 -0500

click-reviewers-tools (0.27) wily; urgency=medium

  * cr_security.py: add ubuntu-sdk-15.04 framework and policy version
    (LP: #1449368)

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 01 May 2015 10:46:57 -0500

click-reviewers-tools (0.26) vivid; urgency=medium

  [ Jamie Strandboge ]
  * adjust tests for new format for systemd stop-timeout
  * add network-service and network-client policygroups for 15.04 policy
  * require existence of hashes.yaml for snaps. More checks coming
  * skip security yaml checks in bin-path and systemd checks
  * cr_security.py: handle multiple frameworks in compat manifest
  * cr_lint.py: handle multiple frameworks with snaps

 -- Jamie Strandboge <jamie@ubuntu.com>  Fri, 01 May 2015 10:22:06 -0500

click-reviewers-tools (0.25) vivid; urgency=medium

  [ Michael Vogt ]
  * Fixed a number of issues raised by pyflakes.

  [ Ricardo Kirkner ]
  * support overrides in all click-check scripts
  * refactored click checks to avoid duplication
  * handle checks from branch as well as installed system-wide when running
    all checks

  [ Jamie Strandboge ]
  * update bin-path tests for new binaries yaml
  * 'oem' is a valid type
  * handle missing 'hooks' in manifest with oem snaps (LP: #1434279)
  * cr_common.py: add config, immutable-config and oem in support of oem snaps
  * obsolete framework click hook and meta/*.framework
  * don't allow 'type: framework' to specify 'frameworks'
  * fix click-show-files with native snaps
  * click-show-files should show package.yaml
  * add framework policy checks
  * update systemd tests to check package.yaml
  * .strip() whitespace in control_description_match
  * check_package_filename() store downloads packages with _all instead of
    _multi. Account for that. We may want to remove this check entirely.
  * cr_security.py: adjust for ubuntu-core/15.04 policy changes
  * cr_security.py: policy_vendor is no longer redflagged
  * cr_lint.py: don't strip 'all' from compat architecture list on snappy
  * cr_lint.py: don't review unused control['Architecture'] on snappy

  [ Fabian Ezequiel Gallina ]
  * fix missing import on clickreviews/cr_framework.py
  * add test for non-string framework

  [ Alex Abreu ]
  * fix webapp exec with no homepage url or with exec field code (LP:
    #1441185)

  [ James Westby ]
  * Drop the checks on the package name in the filename.
    The filename doesn't matter, and the store generates it anyway,
    so checking it is a waste, and keeps breaking as we change the
    rules.

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Mon, 20 Apr 2015 17:26:18 +0200

click-reviewers-tools (0.24) vivid; urgency=medium

  * don't fail if DEBIAN/md5sums doesn't exist with snap packages. The snap
    package format uses a different method for integrity checking
  * add bin/click-check-systemd
  * adjust bin/click-run-checks to call click-check-systemd

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 18 Mar 2015 14:27:51 -0500

click-reviewers-tools (0.23) vivid; urgency=medium

  * fix pep8 warning when building on trusty

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 09 Mar 2015 15:42:08 -0500

click-reviewers-tools (0.22) vivid; urgency=medium

  [ Alexandre Abreu ]
  * Relax the rule that states that webapps with a model search path shouldn't
    have url patterns listed in the command line. In order to avoid confusion,
    we allow this to happen (and it already works fine the command line
    patterns being appended to the locally defined ones). (LP: #1406643)

  [ Jamie Strandboge ]
  * add testsuite test to verify apparmor-profile can't be specified with
    apparmor
  * add apparmor-profile hook tests
  * fix test_check_optional_domain_suffix_without_protocol2() to actually test
    with 'nonexistent' key
  * debian/control:
    - add python3-yaml to Build-Depends and Depends
    - update Vcs-Bzr to point to lp:click-reviewers-tools
  * add snappy-systemd hook tests and update the testsuite accordingly
  * apparmor-profile hook may be used anywhere apparmor can be, but not with
    apparmor itself (apparmor-profile is still redflagged)
  * implement snappy package.yaml lint tests
  * implement snappy package.yaml services tests
  * implement snappy readme.md lint tests
  * implement snappy package.yaml binaries tests
  * one more snappy workaround for check_package_filename()

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 09 Mar 2015 15:08:44 -0500

click-reviewers-tools (0.21) vivid; urgency=medium

  [ Pete Woods ]
  * Add childscopes field to recognised list.
  * Add documentation link of the scope config files:
    CONFIGFILES in lp:unity-scopes-api.

  [ Michael Vogt ]
  * snappy: add two new optional fields: source, type.

  [ Jamie Strandboge ]
  * also use ubuntu-devel-discuss@lists.ubuntu.com to signify a core-app
  * calculate arch correctly in check_package_filename()
  * add ubuntu-core-15.04 to self.major_framework_policy
  * add checks for self.major_framework_policy to policy_vendor checks
  * bin-path should no longer require snappy-systemd hook
  * warn, don't error, on 'Could not find compiled binaries for architecture'
    since it might be ok to, for example, ship a shell script but you only
    want it on ARM devices
  * apparmor-profile is an allowed hook, but a redflagged one
  * don't error that apparmor is missing if apparmor-profile is present

  [ Daniel Holbach ]
  * Deal with multi-arch clicks properly. (LP: #1395204)

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Tue, 03 Mar 2015 14:17:13 +0100

click-reviewers-tools (0.20) vivid; urgency=medium

  [ Martin Albisetti ]
  * Remove checks that validate namespaces and email addresses, those are
    better suited for the store, which knows the information about the
    uploading user. (LP: #1408644)

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 14 Jan 2015 12:12:25 +0100

click-reviewers-tools (0.19) vivid; urgency=medium

  [ Ricardo Kirkner ]
  * fetch framework data before running framework related checks
  * use mtime instead of ctime to check remote file freshness
  * allow specifying overrides for framework checks
  * handle case when overrides data is malformed

  [ Alexandre Abreu ]
  * add support for local html5 app launch mode for webapp-container
    (LP: #1388988)

  [ Jamie Strandboge ]
  * open scopes .ini file as utf8 (LP: #1371692)
  * allow for translatable fields in the scopes .ini file (LP: #1392133)
  * don't require desktop hook with systemd or framework
  * com.ubuntu.snappy can use ubuntu-devel-discuss@lists.ubuntu.com
    (LP: #1395007)
  * add bin-path click hook checks and tests (LP: #1395001)
  * add preliminary framework hook checks and tests (LP: #1395004)
  * refactor hooks checks into parent class (LP: #1395005)
  * sort click-review results in print_findings
  * add preliminary systemd hook checks and tests
  * update apparmor policy json and adjust security checks to properly handle
    different policy vendors
  * update data/apparmor-easyprof-ubuntu.json for 1.3
  * don't warn if specifying 'default' with ubuntu-snappy vendor
  * systemd hook renamed to snappy-systemd
  * allow filenames to end with .snap
  * allow flat namesapces in check_maintainer_email()

  [ Daniel Holbach ]
  * Add askubuntu explanation for policy_version_is_highest.
  * Add askubuntu explanation for debug builds. (LP: #1390163)

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Tue, 16 Dec 2014 17:07:36 +0100

click-reviewers-tools (0.18) utopic; urgency=medium

  * Let setup.py handle non-ascii characters in d/changelog.

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 15 Oct 2014 10:32:57 +0200

click-reviewers-tools (0.17) utopic; urgency=medium

  * webapps may use content_exchange_source (LP: #1380694)
  * online accounts shouldn't specify id and should warn when they do.
    (LP: #1380534)
  * click-show-files: cleanup unpack directory at end

 -- Jamie Strandboge <jamie@ubuntu.com>  Tue, 14 Oct 2014 11:35:43 -0500

click-reviewers-tools (0.16) utopic; urgency=medium

  * add i386 and amd64 to self.valid_control_architectures

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 09 Oct 2014 09:02:55 -0500

click-reviewers-tools (0.15) utopic; urgency=medium

  * don't error in check_application() if no scope or desktop hook when pay-ui
    hook is present
  * updates for push security checks:
    - apps may specify push-notification-client
    - push-helpers must use the new 'ubuntu-push-helper' template

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 08 Oct 2014 15:15:53 -0500

click-reviewers-tools (0.14) utopic; urgency=medium

  * don't error when account-provider and account-qml-plugin does not also
    have apparmor policy. There is no policy for these yet so the errors
    are confusing
  * add Makefile for some convenience functions
  * reuse the unpacked click dir

 -- Jamie Strandboge <jamie@ubuntu.com>  Thu, 02 Oct 2014 15:15:58 -0500

click-reviewers-tools (0.13) utopic; urgency=medium

  * reduce to 'info' when security policy does not end with .apparmor
    (LP: #1358317)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 01 Oct 2014 08:09:42 -0500

click-reviewers-tools (0.12) utopic; urgency=medium

  [ Jamie Strandboge ]
  * traceback in a more friendly way if the json can't be parsed
  * adjust click-review --sdk to start reporting again (LP: #1375787)
  * add additional tests for online accounts (LP: #1357211)
  * explicitly mark 'networking' as bad policy group when using
    push-notification-client (it was already implicitly bad)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 01 Oct 2014 07:14:33 -0500

click-reviewers-tools (0.11) utopic; urgency=medium

  [ Jamie Strandboge ]
  * allow 'accounts' policy group with network scopes.
  * fix fetch URL for apparmor json to point to json file, not html page
    (LP: #1375326)
  * check if security policy does not end with .apparmor (LP: #1358317)
  * cleanup all the temp directories on shutdown (LP: #1370577)
  * shouldn't warn when app is coreapp when it uses x-source or x-test
    (LP: #1371180)

  [ Daniel Holbach ]
  * be clearer about unloadable ClickReview classes.

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 29 Sep 2014 17:01:58 -0500

click-reviewers-tools (0.10) utopic; urgency=medium

  [ Daniel Holbach ]
  * Split out code to find Click*Review classes in the clickreviews package
    into its own module, add tests for it.
  * Refactor bin/click-review to make it easier to extend.
  * Add --sdk option, so the SDK can start using it. (LP: #1363857)
  * Safeguard against broken clickreviews check modules, or modules that are
    still in development. (LP: #1364449)

  [ Jamie Strandboge ]
  * There is now a special pay-ui hook instead of the payui app reusing the
    desktop hook. We added a check for manual review for when the 'pay-ui' 
    hook was implemented in previous commits, but now we should adjust the 
    cr_desktop.py hook to not error when the pay-ui hook is specified but 
    the desktop hook is not.
  * The accounts policy group is now a common policy group (14.10) and 
    webapps more fully integrate with accounts these days, so don't flag 
    accounts as unusual any more.
  * Mark checks requiring manual review by using a special key in the json
    data.
  * Add commented out camera policy group to list of ok policygroups for 
    webapps.

  [ Ricardo Kirkner ]
  * Updated frameworks.json using myapps api. (LP: #1363096)

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 24 Sep 2014 16:10:43 +0200

click-reviewers-tools (0.9) utopic; urgency=medium

  [ Jamie Strandboge ]
  * data/frameworks.json: add ubuntu-sdk-14.10-qml-dev3
  * make missing --enable-back-forward informational for webapp desktop file
    checks

  [ Daniel Holbach ]
  * special-case 'com.ubuntu.scopes'.

  [ Pete Woods ]
  * Match scope review with actual ini file specifications. (LP: #1350427)
  * Point to the correct scope ini path.

  [ Daniel Holbach ]
  * Add 'click-review', a more versatile approach to what 'click-run-checks'
    was doing. (LP: #1355215)
  * Run pep8 during the build.

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 20 Aug 2014 16:03:35 +0200

click-reviewers-tools (0.8) utopic; urgency=medium

  [ Zoltan Balogh ]
  * Give an error if the app is using deprecated Friends API (LP: #1340869)

  [ Martin Albisetti, Daniel Holbach ]
  * refactor the way we handle frameworks into a central static list which
    should be easy to update.

  [ Jamie Strandboge ]
  * updated clickreviews/cr_tests.py for 14.10*dev2
  * bin/repack-click: use -Zgzip when repacking to remain compatible with
    debfile (ie, click install)
  * warn on new hooks
  * implement url-dispatcher hook checks
  * implement scope hook checks
  * implement content-hub hook checks
  * debian/control: Build-Depends and Depends on python3-lxml
  * implement account-* hook checks
  * redflag the upcoming pay-ui hook
  * update security tests to not require apparmor-easyprof-ubuntu or
    apparmor-easyprof by using a static list to ease updating
  * debian/control: drop Build-Depends and Depends on apparmor-easyprof and
    apparmor-easyprof-ubuntu
  * update data/apparmor-easyprof-ubuntu.json to not include friends policy
    group in 1.2 (LP: #1340869)
  * refactor the way we handle apparmor policy into a central static list
    which should be easy to update.
  * implement push-helper tests (LP: #1346481)

  [ Daniel Holbach ]
  * refer to documentation about click in case we encounter .deb packages.
  * fix some pep8 warnings.

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Fri, 25 Jul 2014 16:20:24 +0200

click-reviewers-tools (0.7.1) utopic; urgency=medium

  * Merge r198:
    [ Jamie Strandboge ]
    -  ubuntu-scope-local-content template is no longer available.

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Thu, 05 Jun 2014 16:21:33 +0200

click-reviewers-tools (0.7) utopic; urgency=medium

  [ Daniel Holbach ]
  * clickreviews/cr_lint.py: add link to more info about "Please use newer
    framework". Thanks Alan Pope.

  [ Jamie Strandboge ]
  * add 14.10 frameworks. Thanks Martin Albisetti for initial patch
  * 13.10 frameworks should be deprecated instead of obsolete and warn when
    using deprecated framework
  * add click scopes checks
  * special case ubuntu-devel-discuss@lists.ubuntu.com
  * implement check_hooks() lint tests
  * debian/control: Depends on apparmor-easyprof-ubuntu >= 1.2.2
    (LP: #1324121)

 -- Jamie Strandboge <jamie@ubuntu.com>  Wed, 28 May 2014 23:48:04 +0200

click-reviewers-tools (0.6) utopic; urgency=medium

  [ Daniel Holbach ]
  * d/control: bump apparmor-easyprof-ubuntu requirement to 1.0.44.
    This should safeguard against #1292418 (test-suite failing on saucy).
  * clickreviews/cr_desktop.py: check for deprecated execs, add
    cordova-ubuntu-2.8 to the list. (LP: #1307533)

  [ Jamie Strandboge ]
  * clickreviews/cr_security.py:
    - webview policy can be used by webapps
    - content_exchange policy can be used by webapps (LP: #1308184)
    - clickreviews/tests/test_cr_security.py: tests for above
    - warn if webview not used with ubuntu-webapp template on non-13.10
      frameworks
  * clickreviews/cr_lint.py: obsolete ubuntu-sdk-13.10 framework
  * clickreviews/cr_functional.py: warn if using UbuntuWebView 0.1

 -- Jamie Strandboge <jamie@ubuntu.com>  Mon, 28 Apr 2014 13:01:08 -0500

click-reviewers-tools (0.5) trusty; urgency=medium

  [ Jamie Strandboge ]
  * mock self.supported_policy_versions
  * support multiple frameworks on system in security tests
  * add/update tests for multiple frameworks in security tests

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Thu, 27 Feb 2014 15:30:51 +0100

click-reviewers-tools (0.4) trusty; urgency=medium

  [ Daniel Holbach ]
  * Check for broken icon paths in .desktop files. (LP: #1257429)
  * Add initial set of askubuntu answers.
  * Add ubuntu-html5-app-launcher to expected_execs.

  [ Jamie Strandboge ]
  * Documented and clarified the use of the scripts.
  * Fix crash in __del__. (LP: #1282652)
  * Add webapp-container tests.
  * Document bzr hook to run tests.

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 22 Jan 2014 17:59:26 +0100

click-reviewers-tools (0.3) trusty; urgency=medium

  * d/compat: bump to 9.
  * d/control: 
    - bump Standards-Version, 
    - drop X-Python-Version, we have X-Python3-Version,
    - programmatical -> programmatic
  * d/copyright: fix license mistake (GPL-3+ vs. GPL-3)

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 22 Jan 2014 17:38:47 +0100

click-reviewers-tools (0.2) trusty; urgency=low

  * Initial release (LP: #1230248)

 -- Daniel Holbach <daniel.holbach@ubuntu.com>  Wed, 25 Sep 2013 14:32:32 +0200
